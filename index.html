<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <title>ğŸ” Ø¨ÙŠØ§Ù†Ø§ØªÙŠ Ø§Ù„Ø­ÙŠØ©</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); text-align: center; }
        h1 { color: #2c3e50; margin-bottom: 20px; }
        input[type="password"] { padding: 12px; width: 220px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; direction: ltr; margin: 10px 0; }
        button { padding: 12px 30px; background: #3498db; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; }
        button:hover { background: #2980b9; }
        #data { display: none; margin-top: 20px; text-align: right; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { padding: 12px; text-align: right; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Ø¨ÙŠØ§Ù†Ø§ØªÙŠ Ø§Ù„Ø­ÙŠØ© Ù…Ù† ÙŠ Ù…ÙƒØ§Ù†</h1>
        <p>Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ:</p>
        <input type="password" id="pass" placeholder="1234">
        <br>
        <button onclick="showData()">Ø¯Ø®ÙˆÙ„</button>
        <div id="data"></div>
    </div>

    <script>
        function formatDateFromRecord(rec) {
            if (rec["Ø§Ù„ØªØ§Ø±ÙŠØ®"] && rec["Ø§Ù„Ø´Ù‡Ø±"] && rec["Ø§Ù„Ø³Ù†Ø©"]) {
                return `${rec["Ø§Ù„ØªØ§Ø±ÙŠØ®"]} ${rec["Ø§Ù„Ø´Ù‡Ø±"]} ${rec["Ø§Ù„Ø³Ù†Ø©"]}`;
            }
            return rec["ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ°ÙƒÙŠØ±"] || rec["ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹"] || "â€”";
        }

        function showData() {
            const pass = document.getElementById("pass").value;
            if (pass !== "1234") {
                alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©!");
                return;
            }

            document.getElementById("data").innerHTML = "<p>Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø³Ø­Ø§Ø¨Ø©...</p>";

            fetch("https://debtapp-alg-default-rtdb.firebaseio.com/.json")
                .then(response => response.json())
                .then(data => {
                    let html = "";

                    // Ø§Ù„Ø´Ø±Ø§Ø¦Ø­
                    if (data.sim_cards) {
                        html += `<h2>ğŸ“± Ø§Ù„Ø´Ø±Ø§Ø¦Ø­</h2><table><thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead><tbody>`;
                        Object.values(data.sim_cards).forEach(rec => {
                            html += `<tr><td>${rec["Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"] || ""}</td><td>${rec["Ù†ÙˆØ¹ Ø§Ù„Ø´Ø±ÙŠØ­Ø©"] || ""}</td><td>${rec["Ø§Ù„Ø³Ø¹Ø±"] || ""}</td><td>${formatDateFromRecord(rec)}</td></tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    // Ø§Ù„Ø¯ÙˆØ§Øª
                    if (data.household_tools) {
                        html += `<h2>ğŸ› ï¸ Ø§Ù„Ø¯ÙˆØ§Øª</h2><table><thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead><tbody>`;
                        Object.values(data.household_tools).forEach(rec => {
                            html += `<tr><td>${rec["Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"] || ""}</td><td>${rec["Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø§Ø©"] || ""}</td><td>${formatDateFromRecord(rec)}</td></tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    // Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©
                    if (data.food_items) {
                        html += `<h2>ğŸ›’ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©</h2><table><thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th></tr></thead><tbody>`;
                        Object.values(data.food_items).forEach(rec => {
                            html += `<tr><td>${rec["Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"] || ""}</td><td>${rec["Ù†ÙˆØ¹ Ø§Ù„Ù…Ø§Ø¯Ø©"] || ""}</td><td>${rec["Ø§Ù„Ø³Ø¹Ø±"] || ""}</td><td>${formatDateFromRecord(rec)}</td></tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    document.getElementById("data").innerHTML = html || "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª.</p>";
                })
                .catch(err => {
                    document.getElementById("data").innerHTML = "<p style='color:red;'>âŒ Ø®Ø· ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>";
                });
        }
    </script>
</body>
</html>
