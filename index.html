<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <title>๐ ุจูุงูุงุชู ุงูุญูุฉ</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 20px; }
        .login { text-align: center; margin: 30px 0; }
        input[type="password"] { padding: 12px; width: 220px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; direction: ltr; }
        button { padding: 12px 30px; background: #3498db; color: white; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; margin-top: 10px; }
        button:hover { background: #2980b9; }
        #data { display: none; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { padding: 12px; text-align: right; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; font-weight: bold; }
        .loading { text-align: center; color: #7f8c8d; }
    </style>
</head>
<body>
    <div class="container">
        <h1>๐ ุจูุงูุงุชู ุงูุญูุฉ ูู ู ููุงู</h1>
        
        <div class="login">
            <p>ุฏุฎู ูููุฉ ุงููุฑูุฑ ูุนุฑุถ ุจูุงูุงุชู:</p>
            <input type="password" id="pass" placeholder="1234">
            <br>
            <button onclick="showData()">ุฏุฎูู</button>
        </div>

        <div id="data">
            <div class="loading">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</div>
        </div>
    </div>

    <script>
        function formatDateFromRecord(rec) {
            if (rec["ุงูุชุงุฑูุฎ"] && rec["ุงูุดูุฑ"] && rec["ุงูุณูุฉ"]) {
                return `${rec["ุงูุชุงุฑูุฎ"]} ${rec["ุงูุดูุฑ"]} ${rec["ุงูุณูุฉ"]}`;
            }
            if (rec["ุชุงุฑูุฎ ุงูุชุฐููุฑ"]) return rec["ุชุงุฑูุฎ ุงูุชุฐููุฑ"];
            if (rec["ุชุงุฑูุฎ ุงูุงุณุชุฑุฌุงุน"]) return rec["ุชุงุฑูุฎ ุงูุงุณุชุฑุฌุงุน"];
            return "โ";
        }

        function showData() {
            if (document.getElementById("pass").value !== "1234") {
                alert("โ ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ!");
                return;
            }
            document.getElementById("data").innerHTML = '<div class="loading">ุฌุงุฑู ุฌูุจ ุงูุจูุงูุงุช ูู ุงูุณุญุงุจุฉ...</div>';
            
            fetch("https://debtapp-alg-default-rtdb.firebaseio.com/.json")
                .then(response => response.json())
                .then(data => {
                    let html = "";

                    // ุงูุดุฑุงุฆุญ
                    if (data.sim_cards) {
                        html += `<h2>๐ฑ ุงูุดุฑุงุฆุญ ูุงูุฑุตูุฏ</h2><table><thead><tr><th>ุงูุงุณู ุงููุงูู</th><th>ููุน ุงูุดุฑูุญุฉ</th><th>ุงูุณุนุฑ</th><th>ุงูุชุงุฑูุฎ</th></tr></thead><tbody>`;
                        Object.values(data.sim_cards).forEach(rec => {
                            html += `<tr>
                                <td>${rec["ุงูุงุณู ุงููุงูู"] || ""}</td>
                                <td>${rec["ููุน ุงูุดุฑูุญุฉ"] || ""}</td>
                                <td>${rec["ุงูุณุนุฑ"] || ""}</td>
                                <td>${formatDateFromRecord(rec)}</td>
                            </tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    // ุงูุฏูุงุช
                    if (data.household_tools) {
                        html += `<h2>๐๏ธ ุงูุฏูุงุช ุงูููุฒููุฉ</h2><table><thead><tr><th>ุงูุงุณู ุงููุงูู</th><th>ููุน ุงูุฏุงุฉ</th><th>ุงูุชุงุฑูุฎ</th></tr></thead><tbody>`;
                        Object.values(data.household_tools).forEach(rec => {
                            html += `<tr>
                                <td>${rec["ุงูุงุณู ุงููุงูู"] || ""}</td>
                                <td>${rec["ููุน ุงูุฏุงุฉ"] || ""}</td>
                                <td>${formatDateFromRecord(rec)}</td>
                            </tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    // ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ
                    if (data.food_items) {
                        html += `<h2>๐ ุงูููุงุฏ ุงูุบุฐุงุฆูุฉ</h2><table><thead><tr><th>ุงูุงุณู ุงููุงูู</th><th>ููุน ุงููุงุฏุฉ</th><th>ุงูุณุนุฑ</th><th>ุงูุชุงุฑูุฎ</th></tr></thead><tbody>`;
                        Object.values(data.food_items).forEach(rec => {
                            html += `<tr>
                                <td>${rec["ุงูุงุณู ุงููุงูู"] || ""}</td>
                                <td>${rec["ููุน ุงููุงุฏุฉ"] || ""}</td>
                                <td>${rec["ุงูุณุนุฑ"] || ""}</td>
                                <td>${formatDateFromRecord(rec)}</td>
                            </tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    // ุงูุฏููู ุงููุณุชููุฉ
                    if (data.received_debts) {
                        html += `<h2>๐ฐ ุงูุฏููู ุงููุณุชููุฉ</h2><table><thead><tr><th>ุงูุงุณู ุงููุงูู</th><th>ุงููุจูุบ</th><th>ุงูุชุงุฑูุฎ</th></tr></thead><tbody>`;
                        Object.values(data.received_debts).forEach(rec => {
                            html += `<tr>
                                <td>${rec["ุงูุงุณู ุงููุงูู"] || ""}</td>
                                <td>${rec["ุงููุจูุบ"] || ""}</td>
                                <td>${formatDateFromRecord(rec)}</td>
                            </tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    // ุงูุฏููู ุงููุณุชููุฉ
                    if (data.lent_debts) {
                        html += `<h2>๐ณ ุงูุฏููู ุงููุณุชููุฉ</h2><table><thead><tr><th>ุงูุงุณู ุงููุงูู</th><th>ุดุฎุต ุงููุณุชูู</th><th>ุงููุจูุบ</th><th>ุงูุชุงุฑูุฎ</th></tr></thead><tbody>`;
                        Object.values(data.lent_debts).forEach(rec => {
                            html += `<tr>
                                <td>${rec["ุงูุงุณู ุงููุงูู"] || ""}</td>
                                <td>${rec["ุดุฎุต ุงููุณุชูู"] || ""}</td>
                                <td>${rec["ุงููุจูุบ"] || ""}</td>
                                <td>${formatDateFromRecord(rec)}</td>
                            </tr>`;
                        });
                        html += "</tbody></table>";
                    }

                    if (!html) {
                        html = "<p>ูุง ุชูุฌุฏ ุจูุงูุงุช ุจุนุฏ.</p>";
                    }

                    document.getElementById("data").innerHTML = html;
                })
                .catch(err => {
                    document.getElementById("data").innerHTML = "<p style='color:red;'>โ ุฎุท ูู ุชุญููู ุงูุจูุงูุงุช. ุชุญูู ูู ุงูุงุชุตุงู.</p>";
                });
        }
    </script>
</body>
</html>

